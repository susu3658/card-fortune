<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì¼ìƒì— ìµœì†Œ í•œë²ˆì€ ê¼­ ë´ì•¼í•˜ëŠ” ì£¼ì—­(å‘¨æ˜“)</title>
    <style>
        body { text-align: center; font-family: Arial, sans-serif; }
        .card-container { 
            display: flex; 
            flex-wrap: wrap; 
            justify-content: center; 
            width: 90vw; 
            height: auto;
            margin: auto; 
            position: relative; 
        }
        .card { 
            width: 50px; 
            height: 75px; 
            border: 1px solid black; 
            margin: 5px; 
            text-align: center; 
            line-height: 75px; 
            background-color: gray; 
            cursor: pointer; 
            color: transparent; 
            transition: transform 0.5s ease-in-out, background-color 0.3s;
            position: relative;
            font-size: 16px;
        }
        .card.back {
            background-color: black;
            color: transparent;
        }
        .selected { background-color: yellow; color: black; }
        .selected-card-container {
            margin-top: 20px;
        }
        .red { color: red; }
        .black { color: black; }
        .hidden { display: none; }
        
        /* ë°˜ì‘í˜• ìŠ¤íƒ€ì¼ */
        @media (max-width: 600px) {
            .card-container {
                width: 95vw;
                height: auto;
                display: flex;
                flex-wrap: wrap;
            }
            .card {
                width: 12vw;
                height: 18vw;
                font-size: 2.5vw;
                line-height: 18vw;
            }
            button {
                font-size: 4vw;
                padding: 10px;
            }
            h1 {
                font-size: 5vw;
            }
        }
    </style>
</head>
<body>
    <h1>ì¼ìƒì— ìµœì†Œ í•œë²ˆì€ ê¼­ ë´ì•¼í•˜ëŠ” ì£¼ì—­(å‘¨æ˜“)</h1>
    <button id="startButton" onclick="startGame()">ì‹œì‘í•˜ê¸°</button>
    <p style="font-size: 16px; margin-top: 20px;">
        ìœ íŠœë¸Œ: <a href="https://youtube.com/@kimkaphan3714" target="_blank">youtube.com/@kimkaphan3714</a><br>
        ì¹´í†¡ ID: <a href="mailto:sosss09@hanmail.net">sosss09@hanmail.net</a> <br> <br>
        ìš°ë¦¬ëŠ” ë¡œë˜ ë²ˆí˜¸ì²˜ëŸ¼ ëª¨ë“  ì¡°í•©ì˜ í™•ë¥ ì´ ê°™ë‹¤ê³  ë¯¿ì§€ë§Œ,<br>
              ì „ì„¸ê³„ ìˆ˜ì²œë§Œ ë²ˆì˜ ì¶”ì²¨ ì†ì—ì„œ<br>
              â€˜1, 2, 3, 4, 5, 6â€™ì€ í•œ ë²ˆë„ ë‚˜ì˜¤ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.<br> <br>
             ì£¼ì—­ì€ ì´ì²˜ëŸ¼ ìˆ˜ì²œë…„ê°„ ë°˜ë³µëœ ë¹…ë°ì´í„° ì†ì—ì„œ<br>
             â€˜ë³´ì´ì§€ ì•ŠëŠ” íë¦„â€™ì„ ì°¾ì•„ë‚´ëŠ” ê³ ëŒ€ì˜ í™•ë¥  ì²´ê³„ì…ë‹ˆë‹¤.<br> <br>
             ì‹œì‘í•˜ê¸° ì „,<br>
             ë‹¹ì‹ ì´ ì•Œê³  ì‹¶ì€ ê²ƒì„<br>
             ìµœëŒ€í•œ ê°ê´€ì ìœ¼ë¡œ ë– ì˜¬ë ¤ ì£¼ì„¸ìš”.
    </p>
    <button id="shuffleButton" onclick="shuffleDeck()" class="hidden">ì¹´ë“œ ì„ê¸° (<span id="shuffleCount">3</span>ë²ˆ ë‚¨ìŒ)</button>
    <div class="card-container" id="deck"></div>
    <p id="message"></p>
    <div class="selected-card-container" id="selectedCardContainer"></div>
    
    <script>
        let deck = [];
        let selectedCard = null;
        let shuffleRemaining = 3;
        let cardElements = [];
        let cardSelected = false;
        
        function startGame() {
            document.getElementById("startButton").classList.add("hidden");
            document.getElementById("shuffleButton").classList.remove("hidden");
            document.getElementById("deck").classList.remove("hidden");
            document.getElementById("message").innerText = "";
    document.querySelector("h1").innerText = "ì¹´ë“œë¥¼ 3ë²ˆì„ê³  í•œì¥ì„ ê³¨ë¼ì£¼ì„¸ìš”";
    document.querySelector("p").innerHTML = "â€» 3ë²ˆ ì„ëŠ”ì´ìœ ëŠ”? 3ì´ë¼ëŠ” ìˆ«ìëŠ” ì‚¼ì¬(å¤©, åœ°, äºº) ë³€í™”ì˜ ì™„ì„±, ì ê´˜ í˜•ì„±ê³¼ì •ì— ì¤‘ìš”í•œ ì˜ë¯¸ë¥¼ê°€ì§";

            generateDeck();
            renderDeck();
        }
        
function generateDeck() {
    const suits = [
        { symbol: 'â™ ', color: 'black' },
        { symbol: 'â™¥', color: 'red' },
        { symbol: 'â™¦', color: 'red' },
        { symbol: 'â™£', color: 'black' }
    ];
    const values = ['2', '3', '4', '5', '6', '7', '8', '9', '10', 'J', 'Q', 'A'];  // âœ… K ì œê±°!
    deck = [];

    for (let suit of suits) {
        for (let value of values) {
            deck.push({ text: value + suit.symbol, color: suit.color });
        }
    }
    deck.push({ text: 'Joker1', color: 'black' });  // âœ… ì¡°ì»¤ ì¶”ê°€
    deck.push({ text: 'Joker2', color: 'red' });

    // âŒ `shuffleDeck();` ì‚­ì œ! ì‚¬ìš©ìê°€ ë²„íŠ¼ì„ ëˆŒëŸ¬ì•¼ë§Œ ì„ì„.
}

        function renderDeck() {
            let deckDiv = document.getElementById("deck");
            deckDiv.innerHTML = "";
            cardElements = [];
            deck.forEach((card, index) => {
                let cardDiv = document.createElement("div");
                cardDiv.classList.add("card", "back");
                cardDiv.innerText = "?";
                cardDiv.style.position = "relative";
                cardDiv.onclick = () => selectCard(cardDiv, index);
                deckDiv.appendChild(cardDiv);
                cardElements.push(cardDiv);
            });
        }
        
function shuffleDeck() {
    if (shuffleRemaining > 0) {
        let shuffleButton = document.getElementById("shuffleButton");
        shuffleButton.disabled = true;  // ì„ê¸° ë²„íŠ¼ ë¹„í™œì„±í™”

        let deckContainer = document.getElementById("deck");
        let centerX = deckContainer.offsetWidth / 2 - 25;
        let centerY = Math.min(deckContainer.getBoundingClientRect().top + 30, window.innerHeight * 0.3);

        cardElements.forEach((card) => {
            card.style.transform = `translate(${centerX - card.offsetLeft}px, ${centerY - card.offsetTop}px) scale(0.2)`;
        });

        setTimeout(() => {
            for (let i = 0; i < 3; i++) {
                deck = deck.sort(() => Math.random() - 0.5);
            }
            console.log("ì¹´ë“œê°€ 3ë²ˆ ì„ì˜€ìŠµë‹ˆë‹¤:", deck);

            shuffleRemaining--;
            document.getElementById("shuffleCount").innerText = shuffleRemaining;

            setTimeout(() => {
                cardElements.forEach((card) => {
                    card.innerText = "?";
                    card.style.color = "transparent";
                    card.style.transform = "translate(0, 0) scale(1)";
                });

                if (shuffleRemaining === 0) {
                    document.getElementById("shuffleButton").innerText = "ì¹´ë“œ í•œ ì¥ ì„ íƒí•˜ì„¸ìš”";
                }

                shuffleButton.disabled = false;
            }, 500);
        }, 1500);
    }
}

function selectCard(cardDiv, index) {
    if (shuffleRemaining > 0) {
        document.getElementById("message").innerText = "3ë²ˆ ë‹¤ ì„ê³  ì¹´ë“œë¥¼ ê³¨ë¼ì£¼ì„¸ìš”.";
        return;
    }
    if (cardSelected) return;

    cardSelected = true;
    selectedCard = deck[index];

    cardDiv.classList.remove("back");
    cardDiv.innerText = selectedCard.text;
    cardDiv.style.color = selectedCard.color;

    // âœ… ì„ íƒí•œ ì¹´ë“œë¥¼ ë±ì—ì„œ ì œê±° (ğŸ”¥ ê¸°ì¡´ ì½”ë“œì— ì¶”ê°€í•´ì•¼ í•¨)
    deck.splice(index, 1);  

    // âœ… ì„ íƒí•œ ì¹´ë“œì™€ ë± ì €ì¥ (ë± ìˆœì„œ ìœ ì§€!)
    localStorage.setItem("selectedCard", selectedCard.text);
    localStorage.setItem("deck", JSON.stringify(deck));  // ğŸ”¥ ì„ íƒí•œ ì¹´ë“œ ì œê±°ëœ ë± ì €ì¥

    setTimeout(() => {
        window.location.href = "card_fortune2.html";
    }, 1000);
}

</script>

